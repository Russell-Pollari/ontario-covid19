(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3768:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Z}});var n=a(4942),r=a(2982),s=a(5861),i=a(7757),o=a.n(i),d=a(7294),c=a(5477),l=a(2318),h=a(6523),u=a(1664),p=a(1120),f=a(9895),g=a(5893),m=(0,p.Z)({paper:{margin:16,padding:16,display:"inline-block",maxWidth:584,width:"100%",verticalAlign:"top"}}),v=function(e){var t=e.title,a=e.children,n=m();return(0,g.jsxs)(f.Z,{className:n.paper,children:[t&&(0,g.jsx)(l.Z,{variant:"h6",children:t}),a]})},b=[{date:"2021/03/15",update:"Ontario changed how they count deaths due to covid. I guess we were overcounting before. This involved an update to the data format which broke some things on this dashboard. All fixed now. Thanks to the folks who got in touch to flag it!"},{date:"2022/01/28",update:"All recovered. Thanks to everyone who reached out and wished us well!"},{date:"2022/01/10",update:(0,g.jsx)("span",{children:"Welp. My wife and I have Covid\u2014despite two vaccines each. FYI I had three false negatives with at home rapid tests, despite showing symptoms. Finally, with a throat swap and nasal swap, I got a positive result."})},{date:"2022/01/10",update:(0,g.jsx)("span",{children:"Fixed the vaccine percentage for at folks with at least one dose."})},{date:"2021/12/28",update:(0,g.jsx)("span",{children:"Removed some charts and stats that were out of date, and maybe wrong."})},{date:"2021/12/21",update:(0,g.jsxs)("span",{children:["The Omicron strain ",(0,g.jsx)("em",{children:"seems"})," to be effective at infecting folks with 2 doses."," ",(0,g.jsx)("strong",{children:"But"})," 2 vaccine doses still offer good protection from severe symptoms (see the charts on the Vaccine page).",(0,g.jsx)("br",{}),(0,g.jsx)("br",{}),"Be careful, folks! Get your booster and play it safe! I for one, am not traveling home for the holidays to protect my older family members."]})},{date:"2021/12/21",update:"Fixed some math errors with my Vaccine stats."},{date:"2021/12/03",update:"Fixed some things. Ontario is no longer pubishing VOC cases with this dataset. And they are now publishing numbers for 3rd doses of vaccines and vaccinations for 5-11 age group"},{date:"2021/08/01",update:(0,g.jsxs)("span",{children:["Added some more ",(0,g.jsx)(u.default,{href:"/vaccinations",children:"vaccine stats"}),". Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/aboodmufti",target:"_blank",rel:"noopener noreferrer",children:"Abood Mufti"})," "," for the pull request!"]})},{date:"2021/06/06",update:(0,g.jsxs)("span",{children:["Added a chart showing ",(0,g.jsx)(u.default,{href:"/vaccinations#Vaccination rate by age group",children:"vaccination rates by age group"}),". Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/aboodmufti",target:"_blank",rel:"noopener noreferrer",children:"Abood Mufti"})," "," for the pull request!"]})},{date:"2021/05/28",update:"Added a plot showing the estimated reproduction number\u2014how many new people each confirmed case will infect (above 1 = bad, below 1 = good)."},{date:"2021/05/24",update:(0,g.jsxs)("span",{children:["Breaking down ",(0,g.jsx)(u.default,{href:"/vaccinations#Daily%20vaccines%20administered",children:"daily vaccines"})," by type of dose. Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/aboodmufti",target:"_blank",rel:"noopener noreferrer",children:"Abood Mufti"})," "," for the pull request!"]})},{date:"2021/05/11",update:(0,g.jsxs)("span",{children:["Added a logo and favicon. Thanks to ",(0,g.jsx)("a",{href:"https://twitter.com/mikedrach",target:"_blank",rel:"noopener noreferrer",children:"Mike Drach"})," for designing it!"]})},{date:"2021/04/12",update:(0,g.jsxs)("span",{children:["Added new cases and the 7 day average for each ",(0,g.jsx)(u.default,{href:"/phus",children:"PHU"}),". Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/albertjvm",target:"_blank",rel:"noopener noreferrer",children:"Albert"})," ","for the pull request!"]})},{date:"2021/04/12",update:(0,g.jsxs)("span",{children:["Optimized the query and added more plots to the ",(0,g.jsx)(u.default,{href:"/stats",children:"stats page"}),". Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/TikiTDO",target:"_blank",rel:"noopener noreferrer",children:"TikiTDO"})," ","for the pull requests!"]})},{date:"2021/04/09",update:(0,g.jsxs)("span",{children:["Using adult population for vaccine percentages ",(0,g.jsx)(u.default,{href:"/vaccinations",children:"here"}),"."]})},{date:"2021/04/09",update:(0,g.jsx)("span",{children:'Added "Variants of concern" cases to table and Total cases plot. This data seems to be lagging, so I cannot calculate the daily change.'})},{date:"2021/03/28",update:(0,g.jsxs)("span",{children:["Moved ",(0,g.jsx)(u.default,{href:"/vaccinations",children:"vaccination charts"})," to a new page."]})},{date:"2021/03/27",update:(0,g.jsxs)("span",{children:["Added ",(0,g.jsx)(u.default,{href:"/stats",children:"a page"})," to show case statistics."]})},{date:"2021/03/14",update:"Added plot showing total people fully vaccinated."},{date:"2021/03/14",update:"Making things a little prettier."},{date:"2021/03/10",update:(0,g.jsxs)("span",{children:["Added ",(0,g.jsx)(u.default,{href:"/phus",children:"a page"})," to filter stats by public health unit (PHU)."]})},{date:"2021/03/07",update:(0,g.jsxs)("span",{children:["Added some features to the Summary table and added a 7 day moving average for daily vaccines. Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/IsaacBerman",target:"_blank",rel:"noopener noreferrer",children:"IsaacBerman"})," ","for the pull requests!"]})},{date:"2021/02/20",update:"Added a plot showing daily vaccinations."},{date:"2021/02/07",update:(0,g.jsxs)("span",{children:["Some minor prettifications. Thanks"," ",(0,g.jsx)("a",{href:"https://github.com/TikiTDO",target:"_blank",rel:"noopener noreferrer",children:"TikiTDO"})," ","for the pull requests!"]})}],w=function(){var e=(0,d.useState)([]),t=e[0],a=e[1],n=(0,d.useState)(!1),r=n[0],s=n[1];(0,d.useEffect)((function(){a(r?b:b.slice(0,3))}),[r]);return(0,g.jsxs)(v,{title:"Recent updates",children:[(0,g.jsx)("ul",{children:t.map((function(e,t){var a=e.date,n=e.update;return(0,g.jsxs)("li",{children:[(0,g.jsx)("strong",{children:a})," ",n]},t)}))}),(0,g.jsx)("div",{className:"blue hover-dark-blue pointer",onClick:function(){return s(!r)},children:r?"Show less":"Show all"})]})},j=a(8102),x=function(e){return e?e.toLocaleString():""},_=function(e){return e?"".concat(e>=0?"+":"").concat(x(e)):""},y=[{label:"Date",key:"date_string"},{label:"Active cases",key:"active_cases",formatValue:x,headerColSpan:2},{label:"",key:"new_active_cases",formatValue:_,highlight:"negative"},{label:"Total cases",key:"Total Cases",formatValue:x,headerColSpan:2},{label:"",key:"new_cases",formatValue:_,highlight:"negative"},{label:"Deaths",key:"Deaths",formatValue:x,headerColSpan:2},{label:"",key:"new_deaths",formatValue:_,highlight:"negative"},{label:"Patients hospitalized",key:"Number of patients hospitalized with COVID-19",formatValue:x,headerColSpan:2},{label:"",key:"new_hospital",formatValue:_,highlight:!0},{label:"Patients in ICU",key:"Number of patients in ICU due to COVID-19",formatValue:x,headerColSpan:2},{label:"",key:"new_icu",formatValue:_,highlight:"negative"}],k=function(e){var t=e.dataSource,a=void 0===t?[]:t;return(0,g.jsx)(j.Z,{title:"Status of cases in Ontario",data:a,columns:y})},O=a(3167),D=function(){return(0,g.jsx)(v,{title:"About",children:(0,g.jsxs)("ul",{children:[(0,g.jsxs)("li",{children:["Summaries and visualizations of Covid-19 data taken from"," ",(0,g.jsx)("a",{href:"https://data.ontario.ca/dataset?keywords_en=COVID-19",target:"_blank",rel:"noopener noreferrer",children:"Ontario's data catalogue"}),"."]}),(0,g.jsxs)("li",{children:["I've been maintaining this dashboard for over a year now! If you've gotten value from it, consider"," ",(0,g.jsx)("a",{href:"https://www.buymeacoffee.com/russellpollari",children:"buying me a coffee"}),"."]}),(0,g.jsxs)("li",{children:["Want to contribute and make it better? Fork it on ",(0,g.jsx)("a",{href:"https://github.com/Russell-Pollari/ontario-covid19",children:"GitHub"}),"."]})]})})},T=a(3349),C="Number of patients hospitalized with COVID-19",S="Number of patients in ICU due to COVID-19",I=function(){return new Promise((function(e){(0,T.Z)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=ed270bb8-340b-41f9-a7c6-e8ef587e6d11&limit=1000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e["Reported Date"])-new Date(t["Reported Date"])}));var n=[0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0],s=[0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0],o=0,d=0,c=0,l=0,h=0,u=0;a.map((function(e){e.Deaths=Number(e.Deaths_New_Methodology||e.Deaths||0),e.new_cases=e["Total Cases"]-o,e.new_deaths=Math.max(e.Deaths-d,0),e.icu_no_ventilator=e[S]-e["Number of patients in ICU on a ventilator due to COVID-19"],e.date_string=new Date(e["Reported Date"]).toLocaleString("en-us",{month:"short",day:"numeric"}),e.active_cases=e["Total Cases"]-e.Resolved-e.Deaths,e.new_active_cases=e.active_cases-c,e.new_resolved=e.Resolved-l,e.new_hospital=e[C]-h,e.new_icu=e[S]-u,e.percent_positive=(e.new_cases/e["Total tests completed in the last day"]*100).toFixed(2),(e.percent_positive>100||isNaN(e.percent_positive))&&(e.percent_positive=0),i.shift(),i.push(Number(e.percent_positive||0)),e.tests_positive_rolling_average=(i.reduce((function(e,t){return t+e}),0)/7).toFixed(2),s.shift(),s.push(e["Total tests completed in the last day"]||0),e.tests_rolling_average=Math.round(s.reduce((function(e,t){return t+e}),0)/7),n.shift(),n.push(e.new_cases);var t=n.reduce((function(e,t){return t+e}),0);e.new_cases_rolling_average=Math.round(t/7),r.shift(),r.push(e.new_deaths);var a=r.reduce((function(e,t){return t+e}),0);return e.new_deaths_rolling_average=Math.round(a/7),u=e[S],h=e[C],o=e["Total Cases"],d=e.Deaths,l=e.Resolved,c=e.active_cases,e})),e(a)}))}))},A=function(){return new Promise((function(e){(0,T.Z)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=1ffdf824-2712-4f64-b7fc-f8b2509f9204&limit=10000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.date_start)-new Date(t.date_start)}));var n=a.map((function(e){return e.date_string=new Date(e.date_start).toLocaleString("en-us",{month:"short",day:"numeric"}),e.error_bars=[e.Re-e.lower_CI,e.upper_CI-e.Re],e}));e(n)}))}))},V=a(8267);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Z=function(){var e=(0,d.useState)(),t=e[0],a=e[1],n=(0,d.useState)([]),i=n[0],u=n[1],p=(0,d.useState)(!0),f=p[0],m=p[1],v=function(){var e=(0,s.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A().then(a),e.next=3,I().then(u);case 3:m(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){v()}),[]);var b=[{title:"Summary",href:"#"},{title:V.re.title,href:"#".concat(V.re.title)}].concat((0,r.Z)(V.t.map((function(e){return{title:e.title,href:"#".concat(e.title)}}))));return(0,g.jsxs)(h.Z,{menuItems:b,children:[(0,g.jsx)(l.Z,{variant:"h4",children:"Covid-19 in Ontario"}),(0,g.jsx)(D,{}),(0,g.jsx)(w,{}),f?(0,g.jsxs)("p",{className:"tc",children:[(0,g.jsx)("strong",{children:"Hold tight.. just fetching the latest data"}),(0,g.jsx)("div",{children:(0,g.jsx)(c.Z,{})})]}):(0,g.jsxs)(d.Fragment,{children:[(0,g.jsx)(k,{dataSource:i}),(0,g.jsx)(O.Z,P(P({},V.re),{},{dataSource:t})),V.t.map((function(e,t){return(0,g.jsx)(O.Z,P({dataSource:i,syncId:"syncCharts"},e),t)}))]})]})}},8581:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(3768)}])}},function(e){e.O(0,[774,178,753,755,747,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);