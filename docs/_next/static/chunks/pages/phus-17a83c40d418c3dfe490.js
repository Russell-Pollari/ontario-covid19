(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{3167:function(t,e,a){"use strict";var n=a(4942),r=a(3510),i=a(6201),o=a(5893);function s(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?s(Object(a),!0).forEach((function(e){(0,n.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}e.Z=function(t){var e=t.areas,a=void 0===e?[]:e,n=t.bars,s=void 0===n?[]:n,l=t.lines,d=void 0===l?[]:l,u=t.dataKeyX,f=void 0===u?"date_string":u,h=t.dataSource,p=void 0===h?[]:h,m=t.title,v=t.syncId,b=t.xAxisScale,O=t.xLabel,g=t.leftValueSuffix,x=void 0===g?"":g,j=t.rightValueSuffix,y=void 0===j?"":j,E=t.roundUpYAxisMax,N=void 0!==E&&E,w=t.footnote,T=void 0===w?"":w,I=t.yAxisTicks,A=t.leftYAxisLabel,S=t.rightYAxisLabel,D=[0,"auto"];N&&(D=[0,function(t){return 2*Math.ceil(t/2)}]);return(0,o.jsxs)(i.Z,{title:m,footnote:T,children:[(0,o.jsx)("span",{className:"relative top--72",id:m}),(0,o.jsx)(r.h2,{width:"95%",height:400,className:"mt16",children:(0,o.jsxs)(r.cI,{data:p,syncId:v,children:[s.length+d.length+a.length>1&&(0,o.jsx)(r.De,{layout:"horizontal",align:"center",verticalAlign:"top"}),(0,o.jsx)(r.q3,{vertical:!1}),(0,o.jsx)(r.Kc,{dataKey:f,scale:b,children:O&&(0,o.jsx)(r.__,{value:O,position:"insideBottom"})}),(0,o.jsx)(r.B2,{yAxisId:"left",type:"number",domain:D,ticks:I,tickFormatter:function(t){return t.toLocaleString()+x},label:A?{value:A,angle:-90,position:"insideLeft",style:{textAnchor:"middle"}}:null}),S&&(0,o.jsx)(r.B2,{yAxisId:"right",orientation:"right",tickFormatter:function(t){return t.toLocaleString()+y},label:{value:S,angle:-90,position:"insideRight",style:{textAnchor:"middle"}}}),(0,o.jsx)(r.u,{formatter:function(t,e){return t.toLocaleString()+function(t){var e=a.find((function(e){return e.name==t}))||s.find((function(e){return e.name==t}))||d.find((function(e){return e.name==t}));return"right"==(null===e||void 0===e?void 0:e.yAxisId)?y:x}(e)},labelFormatter:function(t){return(O?"".concat(O,": "):"")+t}}),s.map((function(t){return(0,o.jsx)(r.$Q,c({stackId:"a",yAxisId:"left"},t),t.dataKey)})),d.map((function(t){return(0,o.jsx)(r.x1,c(c({yAxisId:"left"},t),{},{children:t.errorBarKey&&(0,o.jsx)(r.W5,{dataKey:"error_bars",direction:"y",width:2})}),t.dataKey)})),a.map((function(t){return(0,o.jsx)(r.uN,c({yAxisId:"left"},t),t.dataKey)}))]})})]})}},6201:function(t,e,a){"use strict";var n=a(1120),r=a(9895),i=a(2318),o=a(5893),s=(0,n.Z)({paper:{marginTop:16,marginBottom:16,padding:16,maxWidth:1312}});e.Z=function(t){var e=t.title,a=t.children,n=t.footnote,c=s();return(0,o.jsxs)(r.Z,{className:c.paper,children:[e&&(0,o.jsx)(i.Z,{variant:"h6",children:e}),a,(0,o.jsx)("br",{}),(0,o.jsx)(i.Z,{variant:"subtitle1",children:n})]})}},8102:function(t,e,a){"use strict";var n=a(2982),r=a(7294),i=a(1120),o=a(2302),s=a(9613),c=a(8222),l=a(6847),d=a(3712),u=a(3750),f=a(7394),h=a(6201),p=a(5893),m=(0,i.Z)({table:{minWidth:340,marginTop:8,textAlign:"left"},boldCell:{"font-weight":500}}),v=function(t){var e,a=t.column,r=t.row,i=t.rows,o=a.key,s=a.formatValue,l=a.highlight,d=a.align,u=a.isBold,f=r[o],h=Math.max.apply(Math,(0,n.Z)(i.map((function(t){return t[o]})))),v=Math.min.apply(Math,(0,n.Z)(i.map((function(t){return t[o]})))),b=Math.max((f-v)/(h-v),.25),O=m();return"positive"===l?(f<0&&(e="rgba(235, 0, 0, ".concat(1-Math.min(b,.9),")")),f>0&&(e="rgba(0, 235, 0, ".concat(Math.min(b,.9),")"))):(f>0&&(e="rgba(235, 0, 0, ".concat(Math.min(b,.9),")")),f<0&&(e="rgba(0, 235, 0, ".concat(1-Math.min(b,.9),")"))),(0,p.jsx)(c.Z,{className:u?O.boldCell:null,style:l?{backgroundColor:e}:{},align:d||"left",children:s?s(f):f})},b=function(t){var e=t.columns,a=void 0===e?[]:e,n=t.row,r=t.rows,i=void 0===r?[]:r;return(0,p.jsx)(f.Z,{children:a.map((function(t,e){return(0,p.jsx)(v,{column:t,row:n,rows:i},e)}))})};e.Z=function(t){var e=t.columns,a=void 0===e?[]:e,n=t.data,i=void 0===n?[]:n,v=t.title,O=t.paginationEnabled,g=void 0===O||O,x=t.footnote,j=void 0===x?"":x,y=m(),E=(0,r.useState)([]),N=E[0],w=E[1],T=(0,r.useState)(0),I=T[0],A=T[1],S=(0,r.useState)(4),D=S[0],R=S[1];(0,r.useEffect)((function(){var t=I>0?I+(D-1):0,e=i.slice().reverse().slice(t,t+D);w(e)}),[I,D]);return(0,p.jsxs)(h.Z,{title:v,footnote:j,children:[(0,p.jsx)(l.Z,{children:(0,p.jsxs)(o.Z,{className:y.table,size:"small","aria-label":"simple table",children:[(0,p.jsx)(u.Z,{children:(0,p.jsx)(f.Z,{children:a.map((function(t,e){var a=t.label,n=t.headerColSpan,r=t.align;return a?(0,p.jsx)(c.Z,{align:r||"left",colSpan:n,children:a},e):null}))})}),(0,p.jsx)(s.Z,{children:N.map((function(t,e){return(0,p.jsx)(b,{row:t,columns:a,rows:N},e)}))})]})}),g&&(0,p.jsx)(d.Z,{component:"div",rowsPerPage:D,page:I,count:-1,rowsPerPageOptions:[4,10,100],labelDisplayedRows:function(){return""},onChangePage:function(t,e){A(e)},onChangeRowsPerPage:function(t){return R(t.target.value)}})]})}},6638:function(t,e,a){"use strict";var n=a(1664),r=a(5258),i=a(5834),o=a(7812),s=a(8358),c=a(2318),l=a(3245),d=a(3832),u=a(1120),f=a(7317),h=a(5893),p=(0,u.Z)((function(t){return{toolbar:t.mixins.toolbar,main:{padding:16},appBar:{flexGrow:1},title:{flexGrow:1}}}));e.Z=function(t){var e=t.title,a=t.children,u=p();return(0,h.jsxs)("div",{children:[(0,h.jsx)(i.ZP,{}),(0,h.jsx)(r.Z,{position:"fixed",className:u.appBar,children:(0,h.jsxs)(s.Z,{children:[(0,h.jsx)(o.Z,{color:"inherit",edge:"start",children:(0,h.jsx)(n.default,{href:"/",children:(0,h.jsx)(l.Z,{})})}),(0,h.jsx)(c.Z,{variant:"h6",noWrap:!0,className:u.title,children:e}),(0,h.jsx)(f.Z,{})]})}),(0,h.jsxs)("main",{className:u.main,children:[(0,h.jsx)("div",{className:u.toolbar}),(0,h.jsx)(d.Z,{children:a})]})]})}},7317:function(t,e,a){"use strict";var n=a(7294),r=a(1664),i=a(282),o=a(5893);e.Z=function(){return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(r.default,{href:"/",children:(0,o.jsx)(i.Z,{color:"inherit",children:"Cases"})}),(0,o.jsx)(r.default,{href:"/vaccinations",children:(0,o.jsx)(i.Z,{color:"inherit",children:"Vaccines"})}),(0,o.jsx)(r.default,{href:"/phus",children:(0,o.jsx)(i.Z,{color:"inherit",children:"PHUs"})}),(0,o.jsx)(r.default,{href:"/about",children:(0,o.jsx)(i.Z,{color:"inherit",children:"About"})})]})}},3976:function(t,e,a){"use strict";a.d(e,{Jb:function(){return n},W$:function(){return r},O$:function(){return i}});var n=[{label:"How's my flattening",href:"https://howsmyflattening.ca/#/home",description:"More detailed analytics for Ontario, maintained by a dedicated team."},{label:"Ontario status updates",href:"https://data.ontario.ca/dataset/status-of-covid-19-cases-in-ontario",description:"Bulk stats (e.g. total cases, total tests, total deaths). Updated daily ~10:30am."},{label:"Ontario cases",href:"https://data.ontario.ca/en/dataset/confirmed-positive-cases-of-covid-19-in-ontario",description:"Data for each cases (episode date, reporting PHU, age and gender). Updated ~daily."},{label:"Ontario's dashboard",href:"https://covid-19.ontario.ca/data",description:"Ontario government now has their own interactive dashboard, similar to this one."},{label:"Ontario reports",href:"https://www.ontario.ca/page/2019-novel-coronavirus",description:"Detailed reports and summaries from the province."},{label:"Canada's dashboard",href:"https://www.canada.ca/en/public-health/services/diseases/2019-novel-coronavirus-infection.html",description:"Dashboard, data, and general info about cases from Canadian government"},{label:"Data for other countries",href:"https://ourworldindata.org/coronavirus-source-data",description:"Dataset compiled by Our World in Data with bulk stats for each country. Updated ~daily"},{label:"Our World in Data",href:"https://ourworldindata.org/coronavirus",description:"Fantastic interactive visualizations and data reporting on the state of Covid-19 in the world"}],r=[{title:"Email",label:"russell@sharpestminds.com",href:"mailto:russell@sharpestminds.com"},{title:"Twitter",label:"@russ_poll",href:"https://twitter.com/russ_poll"},{title:"Linkedin",href:"https://www.linkedin.com/in/russell-pollari-b555895a/",label:"https://www.linkedin.com/in/russell-pollari-b555895a/"},{title:"GitHub",href:"https://github.com/Russell-Pollari/ontario-covid19",label:"https://github.com/Russell-Pollari/ontario-covid19"}],i=["HALIBURTON, KAWARTHA, PINE RIDGE","HALTON REGION","HASTINGS & PRINCE EDWARD COUNTIES","HURON PERTH","KINGSTON, FRONTENAC, LENNOX & ADDINGTON","LAMBTON COUNTY","LEEDS, GRENVILLE AND LANARK DISTRICT","MIDDLESEX-LONDON","NIAGARA REGION","NORTH BAY PARRY SOUND DISTRICT","NORTHWESTERN","OXFORD ELGIN-ST.THOMAS","PEEL REGION","PETERBOROUGH COUNTY-CITY","PORCUPINE","RENFREW COUNTY AND DISTRICT","SIMCOE MUSKOKA DISTRICT","SUDBURY AND DISTRICT","THUNDER BAY DISTRICT","TIMISKAMING","TORONTO","WATERLOO REGION","WELLINGTON-DUFFERIN-GUELPH","WINDSOR-ESSEX COUNTY","YORK REGION","ALGOMA DISTRICT","BRANT COUNTY","CHATHAM-KENT","CITY OF HAMILTON","CITY OF OTTAWA","DURHAM REGION","EASTERN ONTARIO","GREY BRUCE","HALDIMAND-NORFOLK"]},3349:function(t,e){"use strict";e.Z=function(t,e){var a="jsonp_callback_"+Math.round(1e5*Math.random());window[a]=function(t){delete window[a],document.body.removeChild(n),e(t)};var n=document.createElement("script");n.src=t+(t.indexOf("?")>=0?"&":"?")+"callback="+a,document.body.appendChild(n)}},1950:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return w}});var n=a(4942),r=a(5861),i=a(7757),o=a.n(i),s=a(7294),c=a(5477),l=a(6253),d=a(5007),u=a(3349),f="https://data.ontario.ca/en/api/3/action/datastore_search?resource_id=d1bfe1ad-6575-4352-8302-09ca81f7ddfc&limit=10000",h=function(t){return t.replace(/&/g,"")},p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=f+"&q=".concat(h(t));return new Promise((function(t){(0,u.Z)(e,(function(e){var a=e.result.records;a.sort((function(t,e){return new Date(t.FILE_DATE)-new Date(e.FILE_DATE)}));var n=a.filter((function(t,e,a){return e===a.findIndex((function(e){return t.FILE_DATE===e.FILE_DATE}))})),r=0,i=[0,0,0,0,0,0,0],o=n.map((function(t){t.total_cases=t.ACTIVE_CASES+t.DEATHS+t.RESOLVED_CASES,t.new_cases=Math.max(0,t.total_cases-r),t.date_string=new Date(t.FILE_DATE).toLocaleString("en-us",{month:"short",day:"numeric"}),i.shift(),i.push(t.new_cases);var e=i.reduce((function(t,e){return e+t}),0);return t.new_cases_rolling_average=Math.round(e/7),r=t.total_cases,t}));t(o)}))}))},m=a(3976),v=a(3167),b=a(8102),O=a(5893),g=function(t){return t.toLocaleString()},x=function(t){return"".concat(t>=0?"+":"").concat(g(t))},j=function(t){var e=t.dataSource,a=void 0===e?[]:e,n=t.phuName,r=[{label:"Date",key:"date_string"},{label:"Active cases",key:"ACTIVE_CASES",formatValue:g},{label:"New Cases",key:"new_cases",formatValue:x,highlight:"negative"},{label:"Total cases",key:"total_cases",formatValue:g},{label:"Deaths",key:"DEATHS",formatValue:g}];return(0,O.jsx)(b.Z,{title:"Status of cases in ".concat(n),data:a,columns:r})},y=a(6638);function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function N(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?E(Object(a),!0).forEach((function(e){(0,n.Z)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var w=function(){var t=(0,s.useState)("TORONTO"),e=t[0],a=t[1],n=(0,s.useState)([]),i=n[0],u=n[1],f=(0,s.useState)(!0),h=f[0],b=f[1],g=function(){var t=(0,r.Z)(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b(!0),t.next=3,p(e).then(u);case 3:b(!1);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){e?g(e):u([])}),[e]);return(0,O.jsxs)(y.Z,{title:"Public health units",children:[(0,O.jsx)(d.ZP,{options:m.O$,value:e,getOptionLabel:function(t){return t},onChange:function(t,e){a(e)},renderInput:function(t){return(0,O.jsx)(l.Z,N(N({},t),{},{label:"Public Health Unit",variant:"outlined"}))}}),h?(0,O.jsx)(c.Z,{}):e?(0,O.jsxs)(s.Fragment,{children:[(0,O.jsx)(j,{dataSource:i,phuName:e}),(0,O.jsx)(v.Z,{dataSource:i,title:"Active cases in "+e,dataKeyX:"date_string",syncId:"phu",bars:[{dataKey:"ACTIVE_CASES",fill:"#f9d45c",name:"Active cases",stackId:"a"}]}),(0,O.jsx)(v.Z,{dataSource:i,title:"New cases in "+e,dataKeyX:"date_string",syncId:"phu",bars:[{dataKey:"new_cases",fill:"#f9d45c",name:"New cases",stackId:"a"}],lines:[{dataKey:"new_cases_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]}),(0,O.jsx)(v.Z,{dataSource:i,title:"Total cases in "+e,dataKeyX:"date_string",syncId:"phu",areas:[{dataKey:"total_cases",fill:"#f9d45c",name:"Total cases",stackId:"a"}]}),(0,O.jsx)(v.Z,{dataSource:i,title:"Total deaths in "+e,dataKeyX:"date_string",syncId:"phu",areas:[{dataKey:"DEATHS",fill:"#ef8c8c",name:"Deaths",stackId:"a"}]})]}):(0,O.jsx)("div",{className:"tc mv32",children:(0,O.jsx)("em",{children:"Select a PHU to view its data"})})]})}},5213:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/phus",function(){return a(1950)}])}},function(t){t.O(0,[774,178,753,773,888,179],(function(){return e=5213,t(t.s=e);var e}));var e=t.O();_N_E=e}]);