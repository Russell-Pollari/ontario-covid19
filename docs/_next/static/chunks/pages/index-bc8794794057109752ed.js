_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{RXBc:function(e,t,a){"use strict";a.r(t);var n=a("HALo"),r=a("z7pX"),o=a("vJKn"),i=a.n(o),s=a("rg98"),l=a("q1tI"),u=a.n(l),d=a("iae6"),c=a("ofer"),h=a("7oih"),p=a("YFqc"),f=a.n(p),m=a("R/WZ"),b=a("kKAo"),g=u.a.createElement,v=Object(m.a)({paper:{margin:16,padding:16,display:"inline-block",maxWidth:584,width:"100%",verticalAlign:"top"}}),w=function(e){var t=e.title,a=e.children,n=v();return g(b.a,{className:n.paper},t&&g(c.a,{variant:"h6"},t),a)},_=u.a.createElement,y=[{date:"2022/01/28",update:"All recovered. Thanks to everyone who reached out and wished us well!"},{date:"2022/01/10",update:_("span",null,"Welp. My wife and I have Covid\u2014despite two vaccines each. FYI I had three false negatives with at home rapid tests, despite showing symptoms. Finally, with a throat swap and nasal swap, I got a positive result.")},{date:"2022/01/10",update:_("span",null,"Fixed the vaccine percentage for at folks with at least one dose.")},{date:"2021/12/28",update:_("span",null,"Removed some charts and stats that were out of date, and maybe wrong.")},{date:"2021/12/21",update:_("span",null,"The Omicron strain ",_("em",null,"seems")," to be effective at infecting folks with 2 doses."," ",_("strong",null,"But")," 2 vaccine doses still offer good protection from severe symptoms (see the charts on the Vaccine page).",_("br",null),_("br",null),"Be careful, folks! Get your booster and play it safe! I for one, am not traveling home for the holidays to protect my older family members.")},{date:"2021/12/21",update:"Fixed some math errors with my Vaccine stats."},{date:"2021/12/03",update:"Fixed some things. Ontario is no longer pubishing VOC cases with this dataset. And they are now publishing numbers for 3rd doses of vaccines and vaccinations for 5-11 age group"},{date:"2021/08/01",update:_("span",null,"Added some more ",_(f.a,{href:"/vaccinations"},"vaccine stats"),". Thanks"," ",_("a",{href:"https://github.com/aboodmufti",target:"_blank",rel:"noopener noreferrer"},"Abood Mufti")," "," for the pull request!")},{date:"2021/06/06",update:_("span",null,"Added a chart showing ",_(f.a,{href:"/vaccinations#Vaccination rate by age group"},"vaccination rates by age group"),". Thanks"," ",_("a",{href:"https://github.com/aboodmufti",target:"_blank",rel:"noopener noreferrer"},"Abood Mufti")," "," for the pull request!")},{date:"2021/05/28",update:"Added a plot showing the estimated reproduction number\u2014how many new people each confirmed case will infect (above 1 = bad, below 1 = good)."},{date:"2021/05/24",update:_("span",null,"Breaking down ",_(f.a,{href:"/vaccinations#Daily%20vaccines%20administered"},"daily vaccines")," by type of dose. Thanks"," ",_("a",{href:"https://github.com/aboodmufti",target:"_blank",rel:"noopener noreferrer"},"Abood Mufti")," "," for the pull request!")},{date:"2021/05/11",update:_("span",null,"Added a logo and favicon. Thanks to ",_("a",{href:"https://twitter.com/mikedrach",target:"_blank",rel:"noopener noreferrer"},"Mike Drach")," for designing it!")},{date:"2021/04/12",update:_("span",null,"Added new cases and the 7 day average for each ",_(f.a,{href:"/phus"},"PHU"),". Thanks"," ",_("a",{href:"https://github.com/albertjvm",target:"_blank",rel:"noopener noreferrer"},"Albert")," ","for the pull request!")},{date:"2021/04/12",update:_("span",null,"Optimized the query and added more plots to the ",_(f.a,{href:"/stats"},"stats page"),". Thanks"," ",_("a",{href:"https://github.com/TikiTDO",target:"_blank",rel:"noopener noreferrer"},"TikiTDO")," ","for the pull requests!")},{date:"2021/04/09",update:_("span",null,"Using adult population for vaccine percentages ",_(f.a,{href:"/vaccinations"},"here"),".")},{date:"2021/04/09",update:_("span",null,'Added "Variants of concern" cases to table and Total cases plot. This data seems to be lagging, so I cannot calculate the daily change.')},{date:"2021/03/28",update:_("span",null,"Moved ",_(f.a,{href:"/vaccinations"},"vaccination charts")," to a new page.")},{date:"2021/03/27",update:_("span",null,"Added ",_(f.a,{href:"/stats"},"a page")," to show case statistics.")},{date:"2021/03/14",update:"Added plot showing total people fully vaccinated."},{date:"2021/03/14",update:"Making things a little prettier."},{date:"2021/03/10",update:_("span",null,"Added ",_(f.a,{href:"/phus"},"a page")," to filter stats by public health unit (PHU).")},{date:"2021/03/07",update:_("span",null,"Added some features to the Summary table and added a 7 day moving average for daily vaccines. Thanks"," ",_("a",{href:"https://github.com/IsaacBerman",target:"_blank",rel:"noopener noreferrer"},"IsaacBerman")," ","for the pull requests!")},{date:"2021/02/20",update:"Added a plot showing daily vaccinations."},{date:"2021/02/07",update:_("span",null,"Some minor prettifications. Thanks"," ",_("a",{href:"https://github.com/TikiTDO",target:"_blank",rel:"noopener noreferrer"},"TikiTDO")," ","for the pull requests!")}],k=function(){var e=Object(l.useState)([]),t=e[0],a=e[1],n=Object(l.useState)(!1),r=n[0],o=n[1];Object(l.useEffect)((function(){a(r?y:y.slice(0,3))}),[r]);return _(w,{title:"Recent updates"},_("ul",null,t.map((function(e,t){var a=e.date,n=e.update;return _("li",{key:t},_("strong",null,a)," ",n)}))),_("div",{className:"blue hover-dark-blue pointer",onClick:function(){return o(!r)}},r?"Show less":"Show all"))},O=a("XkeK"),C=u.a.createElement,D=function(e){return e?e.toLocaleString():""},I=function(e){return"".concat(e>=0?"+":"").concat(D(e))},T=[{label:"Date",key:"date_string"},{label:"Active cases",key:"active_cases",formatValue:D,headerColSpan:2},{label:"",key:"new_active_cases",formatValue:I,highlight:"negative"},{label:"Total cases",key:"Total Cases",formatValue:D,headerColSpan:2},{label:"",key:"new_cases",formatValue:I,highlight:"negative"},{label:"Deaths",key:"Deaths",formatValue:D,headerColSpan:2},{label:"",key:"new_deaths",formatValue:I,highlight:"negative"},{label:"Patients hospitalized",key:"Number of patients hospitalized with COVID-19",formatValue:D,headerColSpan:2},{label:"",key:"new_hospital",formatValue:I,highlight:!0},{label:"Patients in ICU",key:"Number of patients in ICU due to COVID-19",formatValue:D,headerColSpan:2},{label:"",key:"new_icu",formatValue:I,highlight:"negative"}],S=function(e){var t=e.dataSource,a=void 0===t?[]:t;return C(O.a,{title:"Status of cases in Ontario",data:a,columns:T})},V=a("Cmmz"),A=u.a.createElement,N=function(){return A(w,{title:"About"},A("ul",null,A("li",null,"Summaries and visualizations of Covid-19 data taken from"," ",A("a",{href:"https://data.ontario.ca/dataset?keywords_en=COVID-19",target:"_blank",rel:"noopener noreferrer"},"Ontario's data catalogue"),"."),A("li",null,"I've been maintaining this dashboard for over a year now! If you've gotten value from it, consider"," ",A("a",{href:"https://www.buymeacoffee.com/russellpollari"},"buying me a coffee"),"."),A("li",null,"Want to contribute and make it better? Fork it on ",A("a",{href:"https://github.com/Russell-Pollari/ontario-covid19"},"GitHub"),".")))},j=a("StWE"),R=function(){return new Promise((function(e){Object(j.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=ed270bb8-340b-41f9-a7c6-e8ef587e6d11&limit=1000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e["Reported Date"])-new Date(t["Reported Date"])}));var n=[0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0],o=[0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0],s=0,l=0,u=0,d=0,c=0,h=0;a.map((function(e){e.new_cases=e["Total Cases"]-s,e.new_deaths=Math.max(e.Deaths-l,0),e.icu_no_ventilator=e["Number of patients in ICU due to COVID-19"]-e["Number of patients in ICU on a ventilator due to COVID-19"],e.date_string=new Date(e["Reported Date"]).toLocaleString("en-us",{month:"short",day:"numeric"}),e.active_cases=e["Total Cases"]-e.Resolved-e.Deaths,e.new_active_cases=e.active_cases-u,e.new_resolved=e.Resolved-d,e.new_hospital=e["Number of patients hospitalized with COVID-19"]-c,e.new_icu=e["Number of patients in ICU due to COVID-19"]-h,e.percent_positive=(e.new_cases/e["Total tests completed in the last day"]*100).toFixed(2),(e.percent_positive>100||isNaN(e.percent_positive))&&(e.percent_positive=0),i.shift(),i.push(Number(e.percent_positive||0)),e.tests_positive_rolling_average=(i.reduce((function(e,t){return t+e}),0)/7).toFixed(2),o.shift(),o.push(e["Total tests completed in the last day"]||0),e.tests_rolling_average=Math.round(o.reduce((function(e,t){return t+e}),0)/7),n.shift(),n.push(e.new_cases);var t=n.reduce((function(e,t){return t+e}),0);e.new_cases_rolling_average=Math.round(t/7),r.shift(),r.push(e.new_deaths);var a=r.reduce((function(e,t){return t+e}),0);return e.new_deaths_rolling_average=Math.round(a/7),h=e["Number of patients in ICU due to COVID-19"],c=e["Number of patients hospitalized with COVID-19"],s=e["Total Cases"],l=e.Deaths,d=e.Resolved,u=e.active_cases,e})),e(a)}))}))},E=function(){return new Promise((function(e){Object(j.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=1ffdf824-2712-4f64-b7fc-f8b2509f9204&limit=10000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.date_start)-new Date(t.date_start)}));var n=a.map((function(e){return e.date_string=new Date(e.date_start).toLocaleString("en-us",{month:"short",day:"numeric"}),e.error_bars=[e.Re-e.lower_CI,e.upper_CI-e.Re],e}));e(n)}))}))},M=a("mPjd"),q=u.a.createElement;t.default=function(){var e=Object(l.useState)(),t=e[0],a=e[1],o=Object(l.useState)([]),u=o[0],p=o[1],f=Object(l.useState)(!0),m=f[0],b=f[1],g=function(){var e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E().then(a),e.next=3,R().then(p);case 3:b(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){g()}),[]);var v=[{title:"Summary",href:"#"},{title:M.b.title,href:"#".concat(M.b.title)}].concat(Object(r.a)(M.a.map((function(e){return{title:e.title,href:"#".concat(e.title)}}))));return q(h.a,{menuItems:v},q(c.a,{variant:"h4"},"Covid-19 in Ontario"),q(N,null),q(k,null),m?q("p",{className:"tc"},q("strong",null,"Hold tight.. just fetching the latest data"),q("div",null,q(d.a,null))):q(l.Fragment,null,q(S,{dataSource:u}),q(V.a,Object(n.a)({},M.b,{dataSource:t})),M.a.map((function(e,t){return q(V.a,Object(n.a)({key:t,dataSource:u,syncId:"syncCharts"},e))}))))}},vlRD:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a("RXBc")}])}},[["vlRD",0,2,1,3,4,5]]]);