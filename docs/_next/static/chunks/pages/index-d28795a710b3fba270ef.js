_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"5UwH":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var n=[{title:"Active cases",dataKeyX:"date_string",bars:[{dataKey:"active_cases",fill:"#f9d45c",name:"Active cases",stackId:"a"}]},{title:"Total cases",dataKeyX:"date_string",areas:[{dataKey:"Total Cases",fill:"#f9d45c",name:"Total cases",stackId:"a"}]},{title:"New cases",dataKeyX:"date_string",bars:[{dataKey:"new_cases",name:"New cases",fill:"#f9d45c"}],lines:[{dataKey:"new_cases_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},{title:"Total deaths",dataKeyX:"date_string",areas:[{dataKey:"Deaths",name:"Total deaths",fill:"#ef8c8c"}]},{title:"New deaths",dataKeyX:"date_string",bars:[{dataKey:"new_deaths",name:"New deaths",fill:"#ef8c8c"}],lines:[{dataKey:"new_deaths_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},{title:"New tests",dataKeyX:"date_string",bars:[{dataKey:"Total tests completed in the last day",name:"New tests",fill:"#509ee3"}],lines:[{dataKey:"Under Investigation",name:"Pending tests",dot:!1,strokeWidth:2,stroke:"teal"},{dataKey:"tests_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},{title:"Percent positive",dataKeyX:"date_string",bars:[{dataKey:"percent_positive",name:"Percent positive",fill:"#509ee3"}],lines:[{dataKey:"tests_positive_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},{title:"Patients hospitalized",dataKeyX:"date_string",bars:[{dataKey:"Number of patients hospitalized with COVID-19",name:"Patients hospitalized",fill:"#ef8c8c"}]},{title:"Patients in ICU",dataKeyX:"date_string",bars:[{dataKey:"Number of patients in ICU on a ventilator with COVID-19",fill:"#509ee3",name:"ICU (with ventilator)",stackId:"a"},{dataKey:"icu_no_ventilator",fill:"#7172ad",name:"ICU (no ventilator)",stackId:"a"}]}],r=[{dataKeyX:"date_string",title:"Total people fully vaccinated",areas:[{dataKey:"total_individuals_fully_vaccinated",name:"Total people fully vacincated",fill:"#509ee3"}]},{dataKeyX:"date_string",title:"Daily vaccines administered",bars:[{dataKey:"previous_day_doses_administered",name:"Daily doses administered",fill:"#509ee3"}],lines:[{dataKey:"new_vaccines_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},{dataKeyX:"date_string",title:"Total vaccines administered",areas:[{dataKey:"total_doses_administered",name:"Total doses administered",fill:"#509ee3"}]}],i={title:"Cases by age group",dataKeyX:"ageGroup",bars:[{dataKey:"deceased",fill:"#ef8c8c",name:"Deceased",stackId:"a"},{dataKey:"active",fill:"#f9d45c",name:"Active",stackId:"a"},{dataKey:"resolved",fill:"green",name:"Resolved",stackId:"a"}]}},RNiq:function(e,t,a){"use strict";a.r(t);var n=a("HALo"),r=a("vJKn"),i=a.n(r),o=a("rg98"),s=a("q1tI"),l=a.n(s),c=a("iae6"),d=a("ofer");function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=a("bXiM"),f=a("5CWz"),m=a("wx14"),h=a("Ff2n"),v=(a("17x9"),a("iuhU")),b=a("H2TA"),g=a("ye/S"),y=s.forwardRef((function(e,t){var a=e.absolute,n=void 0!==a&&a,r=e.classes,i=e.className,o=e.component,l=void 0===o?"hr":o,c=e.flexItem,d=void 0!==c&&c,u=e.light,p=void 0!==u&&u,f=e.orientation,b=void 0===f?"horizontal":f,g=e.role,y=void 0===g?"hr"!==l?"separator":void 0:g,_=e.variant,w=void 0===_?"fullWidth":_,O=Object(h.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return s.createElement(l,Object(m.a)({className:Object(v.a)(r.root,i,"fullWidth"!==w&&r[w],n&&r.absolute,d&&r.flexItem,p&&r.light,"vertical"===b&&r.vertical),role:y,ref:t},O))})),_=Object(b.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(g.c)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(y),w=a("Xt1q"),O=a("ODXe"),k=a("kfZ5"),j=a("wpWl"),E=a("tr08"),x=a("4Hym"),N=a("bfFb"),D={entering:{opacity:1},entered:{opacity:1}},C={enter:j.b.enteringScreen,exit:j.b.leavingScreen},T=s.forwardRef((function(e,t){var a=e.children,n=e.disableStrictModeCompat,r=void 0!==n&&n,i=e.in,o=e.onEnter,l=e.onEntered,c=e.onEntering,d=e.onExit,u=e.onExited,p=e.onExiting,f=e.style,v=e.TransitionComponent,b=void 0===v?k.a:v,g=e.timeout,y=void 0===g?C:g,_=Object(h.a)(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","TransitionComponent","timeout"]),w=Object(E.a)(),j=w.unstable_strictMode&&!r,T=s.useRef(null),P=Object(N.a)(a.ref,t),I=Object(N.a)(j?T:void 0,P),S=function(e){return function(t,a){if(e){var n=j?[T.current,t]:[t,a],r=Object(O.a)(n,2),i=r[0],o=r[1];void 0===o?e(i):e(i,o)}}},K=S(c),R=S((function(e,t){Object(x.b)(e);var a=Object(x.a)({style:f,timeout:y},{mode:"enter"});e.style.webkitTransition=w.transitions.create("opacity",a),e.style.transition=w.transitions.create("opacity",a),o&&o(e,t)})),M=S(l),V=S(p),A=S((function(e){var t=Object(x.a)({style:f,timeout:y},{mode:"exit"});e.style.webkitTransition=w.transitions.create("opacity",t),e.style.transition=w.transitions.create("opacity",t),d&&d(e)})),B=S(u);return s.createElement(b,Object(m.a)({appear:!0,in:i,nodeRef:j?T:void 0,onEnter:R,onEntered:M,onEntering:K,onExit:A,onExited:B,onExiting:V,timeout:y},_),(function(e,t){return s.cloneElement(a,Object(m.a)({style:Object(m.a)({opacity:0,visibility:"exited"!==e||i?void 0:"hidden"},D[e],f,a.props.style),ref:I},t))}))})),P=s.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,i=e.invisible,o=void 0!==i&&i,l=e.open,c=e.transitionDuration,d=e.TransitionComponent,u=void 0===d?T:d,p=Object(h.a)(e,["children","classes","className","invisible","open","transitionDuration","TransitionComponent"]);return s.createElement(u,Object(m.a)({in:l,timeout:c},p),s.createElement("div",{className:Object(v.a)(n.root,r,o&&n.invisible),"aria-hidden":!0,ref:t},a))})),I=Object(b.a)({root:{zIndex:-1,position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},{name:"MuiBackdrop"})(P),S=a("i8i4"),K=a("l3Wi");function R(e,t){var a=function(e,t){var a,n=t.getBoundingClientRect();if(t.fakeTransform)a=t.fakeTransform;else{var r=window.getComputedStyle(t);a=r.getPropertyValue("-webkit-transform")||r.getPropertyValue("transform")}var i=0,o=0;if(a&&"none"!==a&&"string"===typeof a){var s=a.split("(")[1].split(")")[0].split(",");i=parseInt(s[4],10),o=parseInt(s[5],10)}return"left"===e?"translateX(".concat(window.innerWidth,"px) translateX(").concat(i-n.left,"px)"):"right"===e?"translateX(-".concat(n.left+n.width-i,"px)"):"up"===e?"translateY(".concat(window.innerHeight,"px) translateY(").concat(o-n.top,"px)"):"translateY(-".concat(n.top+n.height-o,"px)")}(e,t);a&&(t.style.webkitTransform=a,t.style.transform=a)}var M={enter:j.b.enteringScreen,exit:j.b.leavingScreen},V=s.forwardRef((function(e,t){var a=e.children,n=e.direction,r=void 0===n?"down":n,i=e.in,o=e.onEnter,l=e.onEntered,c=e.onEntering,d=e.onExit,u=e.onExited,p=e.onExiting,f=e.style,v=e.timeout,b=void 0===v?M:v,g=e.TransitionComponent,y=void 0===g?k.a:g,_=Object(h.a)(e,["children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),w=Object(E.a)(),O=s.useRef(null),j=s.useCallback((function(e){O.current=S.findDOMNode(e)}),[]),D=Object(N.a)(a.ref,j),C=Object(N.a)(D,t),T=function(e){return function(t){e&&(void 0===t?e(O.current):e(O.current,t))}},P=T((function(e,t){R(r,e),Object(x.b)(e),o&&o(e,t)})),I=T((function(e,t){var a=Object(x.a)({timeout:b,style:f},{mode:"enter"});e.style.webkitTransition=w.transitions.create("-webkit-transform",Object(m.a)({},a,{easing:w.transitions.easing.easeOut})),e.style.transition=w.transitions.create("transform",Object(m.a)({},a,{easing:w.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",c&&c(e,t)})),V=T(l),A=T(p),B=T((function(e){var t=Object(x.a)({timeout:b,style:f},{mode:"exit"});e.style.webkitTransition=w.transitions.create("-webkit-transform",Object(m.a)({},t,{easing:w.transitions.easing.sharp})),e.style.transition=w.transitions.create("transform",Object(m.a)({},t,{easing:w.transitions.easing.sharp})),R(r,e),d&&d(e)})),X=T((function(e){e.style.webkitTransition="",e.style.transition="",u&&u(e)})),z=s.useCallback((function(){O.current&&R(r,O.current)}),[r]);return s.useEffect((function(){if(!i&&"down"!==r&&"right"!==r){var e=Object(K.a)((function(){O.current&&R(r,O.current)}));return window.addEventListener("resize",e),function(){e.clear(),window.removeEventListener("resize",e)}}}),[r,i]),s.useEffect((function(){i||z()}),[i,z]),s.createElement(y,Object(m.a)({nodeRef:O,onEnter:P,onEntered:V,onEntering:I,onExit:B,onExited:X,onExiting:A,appear:!0,in:i,timeout:b},_),(function(e,t){return s.cloneElement(a,Object(m.a)({ref:C,style:Object(m.a)({visibility:"exited"!==e||i?void 0:"hidden"},f,a.props.style)},t))}))})),A=a("kKAo"),B=a("NqtD"),X={left:"right",right:"left",top:"down",bottom:"up"};var z={enter:j.b.enteringScreen,exit:j.b.leavingScreen},W=s.forwardRef((function(e,t){var a=e.anchor,n=void 0===a?"left":a,r=e.BackdropProps,i=e.children,o=e.classes,l=e.className,c=e.elevation,d=void 0===c?16:c,u=e.ModalProps,p=(u=void 0===u?{}:u).BackdropProps,f=Object(h.a)(u,["BackdropProps"]),b=e.onClose,g=e.open,y=void 0!==g&&g,_=e.PaperProps,O=void 0===_?{}:_,k=e.SlideProps,j=e.TransitionComponent,x=void 0===j?V:j,N=e.transitionDuration,D=void 0===N?z:N,C=e.variant,T=void 0===C?"temporary":C,P=Object(h.a)(e,["anchor","BackdropProps","children","classes","className","elevation","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"]),S=Object(E.a)(),K=s.useRef(!1);s.useEffect((function(){K.current=!0}),[]);var R=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?X[t]:t}(S,n),M=s.createElement(A.a,Object(m.a)({elevation:"temporary"===T?d:0,square:!0},O,{className:Object(v.a)(o.paper,o["paperAnchor".concat(Object(B.a)(R))],O.className,"temporary"!==T&&o["paperAnchorDocked".concat(Object(B.a)(R))])}),i);if("permanent"===T)return s.createElement("div",Object(m.a)({className:Object(v.a)(o.root,o.docked,l),ref:t},P),M);var W=s.createElement(x,Object(m.a)({in:y,direction:X[R],timeout:D,appear:K.current},k),M);return"persistent"===T?s.createElement("div",Object(m.a)({className:Object(v.a)(o.root,o.docked,l),ref:t},P),W):s.createElement(w.a,Object(m.a)({BackdropProps:Object(m.a)({},r,p,{transitionDuration:D}),BackdropComponent:I,className:Object(v.a)(o.root,o.modal,l),open:y,onClose:b,ref:t},P,f),W)})),U=Object(b.a)((function(e){return{root:{},docked:{flex:"0 0 auto"},paper:{overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:e.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},paperAnchorLeft:{left:0,right:"auto"},paperAnchorRight:{left:"auto",right:0},paperAnchorTop:{top:0,left:0,bottom:"auto",right:0,height:"auto",maxHeight:"100%"},paperAnchorBottom:{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},paperAnchorDockedLeft:{borderRight:"1px solid ".concat(e.palette.divider)},paperAnchorDockedTop:{borderBottom:"1px solid ".concat(e.palette.divider)},paperAnchorDockedRight:{borderLeft:"1px solid ".concat(e.palette.divider)},paperAnchorDockedBottom:{borderTop:"1px solid ".concat(e.palette.divider)},modal:{}}}),{name:"MuiDrawer",flip:!1})(W),q=a("ZPUd"),H=a.n(q),L=a("PsDL"),F=a("eD//"),G=a("tVbE"),Y=a("MquD"),Z=s.forwardRef((function(e,t){var a=e.children,n=e.classes,r=e.className,i=e.disableTypography,o=void 0!==i&&i,l=e.inset,c=void 0!==l&&l,u=e.primary,p=e.primaryTypographyProps,f=e.secondary,b=e.secondaryTypographyProps,g=Object(h.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),y=s.useContext(Y.a).dense,_=null!=u?u:a;null==_||_.type===d.a||o||(_=s.createElement(d.a,Object(m.a)({variant:y?"body2":"body1",className:n.primary,component:"span",display:"block"},p),_));var w=f;return null==w||w.type===d.a||o||(w=s.createElement(d.a,Object(m.a)({variant:"body2",className:n.secondary,color:"textSecondary",display:"block"},b),w)),s.createElement("div",Object(m.a)({className:Object(v.a)(n.root,r,y&&n.dense,c&&n.inset,_&&w&&n.multiline),ref:t},g),_,w)})),J=Object(b.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(Z),Q=a("uniG"),$=a.n(Q),ee=a("lO0E"),te=a("R/WZ"),ae=a("bfUK"),ne=a("5UwH"),re=l.a.createElement;function ie(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var se=Object(te.a)((function(e){return{drawer:{width:240},menuButton:{marginRight:e.spacing(2)},closeButton:{margin:e.spacing(2)},toolbar:oe(oe({},e.mixins.toolbar),{},{textAlign:"right"}),appBar:{flexGrow:1},title:{flexGrow:1},drawerPaper:{width:240},content:{padding:e.spacing(3)}}})),le=function(e){var t=e.window,a=e.children,n=se(),r=Object(s.useState)(!1),i=r[0],o=r[1],l=function(){o(!i)},c=re("div",null,re("div",{className:n.toolbar},re(L.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,className:n.closeButton},re(H.a,null))),re(_,null),re(F.a,null,re(G.a,{button:!0,component:"a",href:"#"},re(J,{primary:"Summary"})),ne.c.map((function(e,t){return re(G.a,{button:!0,component:"a",key:t,href:"#".concat(e.title)},re(J,{primary:e.title}))})),ne.b.map((function(e,t){return re(G.a,{button:!0,component:"a",key:t,href:"#".concat(e.title)},re(J,{primary:e.title}))})))),u=void 0!==t?function(){return t().document.body}:void 0;return re("div",{className:n.root},re(f.a,null),re(p.a,{position:"fixed",className:n.appBar},re(ee.a,null,re(L.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:l,className:n.menuButton},re($.a,null)),re(d.a,{variant:"h6",noWrap:!0,className:n.title},"Covid-19 in Ontario"),re(ae.a,null))),re("nav",{className:n.drawer},re(U,{container:u,variant:"temporary",anchor:"left",open:i,onClose:l,classes:{paper:n.drawerPaper},ModalProps:{keepMounted:!1}},c)),re("main",{className:n.content},re("div",{className:n.toolbar}),a))},ce=a("YFqc"),de=a.n(ce),ue=l.a.createElement,pe=Object(te.a)({paper:{margin:16,padding:16}}),fe=[{date:"2021-03/27",update:ue("span",null,"Added ",ue(de.a,{href:"/stats"},"a page")," to show case statistics.")},{date:"2021/03/14",update:"Added plot showing total people fully vaccinated."},{date:"2021/03/14",update:"Making thins a little prettier."},{date:"2021/03/10",update:ue("span",null,"Added ",ue(de.a,{href:"/phus"},"a page")," to filter stats by public health unit (PHU).")},{date:"2021/03/07",update:ue("span",null,"Added some features to the Summary table and added a 7 day moving average for daily vaccines. Thanks"," ",ue("a",{href:"https://github.com/IsaacBerman",target:"_blank",rel:"noopener noreferrer"},"IsaacBerman")," ","for the pull requests!")},{date:"2021/02/20",update:"Added a plot showing daily vaccinations."},{date:"2021/02/07",update:ue("span",null,"Some minor prettifications. Thanks"," ",ue("a",{href:"https://github.com/TikiTDO",target:"_blank",rel:"noopener noreferrer"},"TikiTDO")," ","for the pull requests!")}],me=function(){var e=Object(s.useState)([]),t=e[0],a=e[1],n=Object(s.useState)(!1),r=n[0],i=n[1],o=pe();Object(s.useEffect)((function(){a(r?fe:fe.slice(0,2))}),[r]);return ue(A.a,{className:o.paper},ue(d.a,{variant:"h6"},"Recent updates"),ue("ul",null,t.map((function(e,t){var a=e.date,n=e.update;return ue("li",{key:t},ue("strong",null,a)," ",n)}))),ue("div",{className:"blue hover-dark-blue pointer",onClick:function(){return i(!r)}},r?"Show less":"Show all"))},he=a("SqWM"),ve=l.a.createElement,be=function(e){return e.toLocaleString()},ge=function(e){return"".concat(e>=0?"+":"").concat(be(e))},ye=function(e){var t=e.dataSource,a=void 0===t?[]:t,n=[{label:"Date",key:"date_string"},{label:"Active cases",key:"active_cases",formatValue:be,align:"right"},{label:"",key:"new_active_cases",formatValue:ge,highlight:!0},{label:"Total cases",key:"Total Cases",formatValue:be,align:"right"},{label:"",key:"new_cases",formatValue:ge,highlight:!0},{label:"Deaths",key:"Deaths",formatValue:be,align:"right"},{label:"",key:"new_deaths",formatValue:ge,highlight:!0},{label:"Patients hospitalized",key:"Number of patients hospitalized with COVID-19",formatValue:be,align:"right"},{label:"",key:"new_hospital",formatValue:ge,highlight:!0},{label:"Patients in ICU",key:"Number of patients in ICU with COVID-19",formatValue:be,align:"right"},{label:"",key:"new_icu",formatValue:ge,highlight:!0}];return ve(he.a,{title:"Status of cases in Ontario",data:a,columns:n})},_e=a("M/4y"),we=l.a.createElement,Oe=function(e){var t=e.data,a=void 0===t?[]:t;if(!a.length)return null;var n=a[a.length-1].total_individuals_fully_vaccinated;return we("div",{className:"mv16"},we(d.a,{variant:"h6"},"**~",Math.round(n/14733119*100*100)/100,"% of the population Ontario is fully vaccinated**"))},ke=a("NGxS"),je=function(){return new Promise((function(e){Object(ke.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=ed270bb8-340b-41f9-a7c6-e8ef587e6d11&limit=1000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e["Reported Date"])-new Date(t["Reported Date"])}));var n=[0,0,0,0,0,0,0],r=[0,0,0,0,0,0,0],i=[0,0,0,0,0,0,0],o=[0,0,0,0,0,0,0],s=0,l=0,c=0,d=0,u=0,p=0;a.map((function(e){e.new_cases=e["Total Cases"]-s,e.new_deaths=Math.max(e.Deaths-l,0),e.icu_no_ventilator=e["Number of patients in ICU with COVID-19"]-e["Number of patients in ICU on a ventilator with COVID-19"],e.date_string=new Date(e["Reported Date"]).toLocaleString("en-us",{month:"short",day:"numeric"}),e.active_cases=e["Total Cases"]-e.Resolved-e.Deaths,e.new_active_cases=e.active_cases-c,e.new_resolved=e.Resolved-d,e.new_hospital=e["Number of patients hospitalized with COVID-19"]-u,e.new_icu=e["Number of patients in ICU with COVID-19"]-p,e.percent_positive=(e.new_cases/e["Total tests completed in the last day"]*100).toFixed(2),(e.percent_positive>100||isNaN(e.percent_positive))&&(e.percent_positive=0),o.shift(),o.push(Number(e.percent_positive||0)),e.tests_positive_rolling_average=(o.reduce((function(e,t){return t+e}),0)/7).toFixed(2),i.shift(),i.push(e["Total tests completed in the last day"]||0),e.tests_rolling_average=Math.round(i.reduce((function(e,t){return t+e}),0)/7),n.shift(),n.push(e.new_cases);var t=n.reduce((function(e,t){return t+e}),0);e.new_cases_rolling_average=Math.round(t/7),r.shift(),r.push(e.new_deaths);var a=r.reduce((function(e,t){return t+e}),0);return e.new_deaths_rolling_average=Math.round(a/7),p=e["Number of patients in ICU with COVID-19"],u=e["Number of patients hospitalized with COVID-19"],s=e["Total Cases"],l=e.Deaths,d=e.Resolved,c=e.active_cases,e})),e(a)}))}))},Ee=function(){return new Promise((function(e){Object(ke.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=100000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.report_date)-new Date(t.report_date)}));for(var n=[0,0,0,0,0,0,0],r=[],i=1;i<a.length;i++){var o=a[i],s=new Date(o.report_date).getTime(),l=a[i-1];r.push(l);var c=new Date(l.report_date);for(c.setDate(c.getDate()+1);c.getTime()<s;){var d=Object.assign({},l,{report_date:c.toISOString().replace(/\.\d+Z/,"")});r.push(d),c.setDate(c.getDate()+1)}}r.push(a[a.length-1]),r.map((function(e){var t=e.report_date,a=e.total_doses_administered,r=e.previous_day_doses_administered,i=e.total_individuals_fully_vaccinated;e.date_string=new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),e.total_doses_administered=Number(a.replace(/,/g,"")),e.previous_day_doses_administered=Number(r.replace(/,/g,"")),e.total_individuals_fully_vaccinated=Number(i.replace(/,/g,"")),n.shift(),n.push(e.previous_day_doses_administered);var o=n.reduce((function(e,t){return t+e}),0);return e.new_vaccines_rolling_average=Math.round(o/7),e})),e(r)}))}))},xe=l.a.createElement;t.default=function(){var e=Object(s.useState)([]),t=e[0],a=e[1],r=Object(s.useState)(!0),l=r[0],u=r[1],p=Object(s.useState)([]),f=p[0],m=p[1],h=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee().then(m);case 2:return e.next=4,je().then(a);case 4:u(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){h()}),[]),xe(le,null,xe(d.a,{variant:"h4"},"Simple dashboard visualizing Ontario's Covid-19 data."),xe(Oe,{data:f}),xe("p",null,"I've been maintaining this dashboard for over a year now! If you've gotten value from it, consider"," ",xe("a",{href:"https://www.buymeacoffee.com/russellpollari"},"buying me a coffee"),"."),xe("p",null,"Want to contribute and make it better? Fork this dashboard on ",xe("a",{href:"https://github.com/Russell-Pollari/ontario-covid19"},"GitHub"),"."),xe(me,null),l?xe("p",{className:"tc"},xe("strong",null,"Hold tight.. just fetching the latest data"),xe("div",null,xe(c.a,null))):xe(s.Fragment,null,xe(ye,{dataSource:t}),ne.c.map((function(e,t){return xe(_e.a,Object(n.a)({key:t,dataSource:f,syncId:"vaccineCharts"},e))})),ne.b.map((function(e,a){return xe(_e.a,Object(n.a)({key:a,dataSource:t,syncId:"syncCharts"},e))}))))}},ZPUd:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=i},uniG:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");t.default=i},vlRD:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a("RNiq")}])}},[["vlRD",0,2,1,3,4,5]]]);