_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"7Xy9":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vaccinations",function(){return a("t8Fg")}])},t8Fg:function(e,t,a){"use strict";a.r(t);var n=a("HALo"),i=a("z7pX"),o=a("q1tI"),r=a.n(o),l=a("iae6"),s=a("ofer"),d=a("7oih"),u=a("Cmmz"),c=a("uM61"),_=r.a.createElement,v=function(e){var t=e.data,a=void 0===t?[]:t;if(!a.length)return null;var n=a[a.length-1],i=n.total_individuals_fully_vaccinated,o=n.total_doses_administered-2*i,r=(2*(12932471-i)-o)/n.new_vaccines_rolling_average,l=(12932471-i-o)/n.new_vaccines_rolling_average;return _(c.a,{title:"Vaccinations at a glance"},_("ul",null,_("li",null,_("strong",null,Math.round((o+i)/12932471*100*100)/100,"%")," ","of the ",_("em",null,"eligible")," population of Ontario has had at least one shot.*"),_("li",null,_("strong",null,Math.round(i/12932471*100*100)/100,"%")," ","of the ",_("em",null,"eligible")," population of Ontario is fully vaccinated.*"),_("li",null,"At the current average pace of ",_("strong",null,n.new_vaccines_rolling_average.toLocaleString())," shots per day. We can deliver a single dose to every eligible person in ",_("strong",null,Math.round(l)," days.")," And reach full vaccination in ",_("strong",null,Math.round(r)," days.*"))),_("div",{className:"mt16 f12"},"*Eligible population: Everyone 12 and older based on estimates from Statistics Canada on July 1st 2020.",_("br",null),"*These numbers are all back-of-the-envolope estimates. Don't take them as fact."))},f=a("XkeK"),m=r.a.createElement,h=function(e){return e.toLocaleString()},g=function(e){return"".concat(e>=0?"+":"").concat(h(e))},p=[{label:"Date",key:"date_string"},{label:"Total doses administered",key:"total_doses_administered",formatValue:h},{label:"Daily vaccines",key:"previous_day_total_doses_administered",formatValue:g,highlight:"positive"},{label:"7 day average",key:"new_vaccines_rolling_average",formatValue:g,highlight:"positive"},{label:"Total people fully vaccinated",key:"total_individuals_fully_vaccinated",formatValue:h}],y=function(e){var t=e.dataSource,a=void 0===t?[]:t;return m(f.a,{title:"Status of Vaccinations in Ontario",data:a,columns:p})},b=a("StWE"),w=function(e){return"number"===typeof e?e:Number((e||"0").replace(/,/g,""))},S=function(){return new Promise((function(e){Object(b.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=100000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.report_date)-new Date(t.report_date)}));for(var n=[0,0,0,0,0,0,0],i=[],o=1;o<a.length;o++){var r=a[o],l=new Date(r.report_date).getTime(),s=a[o-1];i.push(s);var d=new Date(s.report_date);for(d.setDate(d.getDate()+1);d.getTime()<l;){var u=Object.assign({},s,{report_date:d.toISOString().replace(/\.\d+Z/,"")});i.push(u),d.setDate(d.getDate()+1)}}i.push(a[a.length-1]);var c=0,_=0;i.map((function(e){var t=e.report_date,a=e.total_doses_administered,i=e.previous_day_total_doses_administered,o=e.total_doses_in_fully_vaccinated_individuals,r=e.total_individuals_fully_vaccinated;e.date_string=new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),e.total_doses_administered=w(a),e.previous_day_total_doses_administered=w(i),e.total_individuals_fully_vaccinated=w(r);var l=w(o),s=w(2*(e.total_individuals_fully_vaccinated-l/2)),d=w(s-_);_=s;var u=Math.floor((l-s)/2),v=u-c;c=u;var f=e.previous_day_total_doses_administered-(v+d);e.previous_day_one_shot_doses_administered=d,e.previous_day_second_doses_administered=v,e.previous_day_first_doses_administered=f,n.shift(),n.push(e.previous_day_total_doses_administered);var m=n.reduce((function(e,t){return t+e}),0);return e.new_vaccines_rolling_average=Math.round(m/7),e})),e(i)}))}))},D=a("mPjd"),E=r.a.createElement;t.default=function(){var e=Object(o.useState)([]),t=e[0],a=e[1],r=Object(o.useState)(!0),c=r[0],_=r[1];Object(o.useEffect)((function(){S().then(a).then((function(){return _(!1)}))}),[]);var f=[{title:"Summary",href:"#"}].concat(Object(i.a)(D.e.map((function(e){var t=e.title;return{title:t,href:"#".concat(t)}}))));return E(d.a,{menuItems:f},E("div",{className:"ph16"},E(s.a,{variant:"h4"},"Covid-19 Vaccinations in Ontario"),c?E("p",{className:"tc"},E("strong",null,"Hold tight.. just fetching the latest data"),E("div",null,E(l.a,null))):E(o.Fragment,null,E(v,{data:t}),E(y,{dataSource:t}),D.e.map((function(e,a){return E(u.a,Object(n.a)({key:a,dataSource:t,syncId:"vaccineCharts"},e))})))))}}},[["7Xy9",0,2,1,3,4,5,6]]]);