_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"7Xy9":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vaccinations",function(){return a("t8Fg")}])},t8Fg:function(e,t,a){"use strict";a.r(t);var n=a("HALo"),r=a("z7pX"),i=a("q1tI"),o=a.n(i),l=a("iae6"),c=a("ofer"),s=a("7oih"),u=a("Cmmz"),d=a("uM61"),_=o.a.createElement,v=function(e){var t=e.data,a=void 0===t?[]:t;if(!a.length)return null;var n=a[a.length-1],r=n.total_individuals_fully_vaccinated,i=n.total_doses_administered-2*r,o=(2*(14733119-r)-i)/n.new_vaccines_rolling_average,l=(14733119-r-i)/n.new_vaccines_rolling_average;return _(d.a,{title:"Vaccinations at a glance"},_("ul",null,_("li",null,_("strong",null,Math.round((i+r)/14733119*100*100)/100,"%")," ","of the population of Ontario has had at least one shot.*"),_("li",null,_("strong",null,Math.round(r/14733119*100*100)/100,"%")," ","of the population of Ontario is fully vaccinated.*"),_("li",null,"At the current average pace of ",_("strong",null,n.new_vaccines_rolling_average.toLocaleString())," shots per day. We can deliver a single dose to everyone in ",_("strong",null,Math.round(l)," days.")," And reach full vaccination in ",_("strong",null,Math.round(o)," days.*"))),_("div",{className:"mt16 f12"},"*These numbers are all back-of-the-envolope estimates. Don't take them as fact."))},f=a("XkeK"),h=o.a.createElement,g=function(e){return e.toLocaleString()},m=function(e){return"".concat(e>=0?"+":"").concat(g(e))},p=[{label:"Date",key:"date_string"},{label:"Total doses administered",key:"total_doses_administered",formatValue:g},{label:"Daily vaccines",key:"previous_day_doses_administered",formatValue:m,highlight:"positive"},{label:"7 day average",key:"new_vaccines_rolling_average",formatValue:m,highlight:"positive"},{label:"Total people fully vaccinated",key:"total_individuals_fully_vaccinated",formatValue:g}],y=function(e){var t=e.dataSource,a=void 0===t?[]:t;return h(f.a,{title:"Status of Vaccinations in Ontario",data:a,columns:p})},w=a("StWE"),b=function(){return new Promise((function(e){Object(w.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=100000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.report_date)-new Date(t.report_date)}));for(var n=[0,0,0,0,0,0,0],r=[],i=1;i<a.length;i++){var o=a[i],l=new Date(o.report_date).getTime(),c=a[i-1];r.push(c);var s=new Date(c.report_date);for(s.setDate(s.getDate()+1);s.getTime()<l;){var u=Object.assign({},c,{report_date:s.toISOString().replace(/\.\d+Z/,"")});r.push(u),s.setDate(s.getDate()+1)}}r.push(a[a.length-1]),r.map((function(e){var t=e.report_date,a=e.total_doses_administered,r=e.previous_day_doses_administered,i=e.total_individuals_fully_vaccinated;e.date_string=new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),e.total_doses_administered=Number(a.replace(/,/g,"")),e.previous_day_doses_administered=Number((r||"0").replace(/,/g,"")),e.total_individuals_fully_vaccinated=Number((i||"0").replace(/,/g,"")),n.shift(),n.push(e.previous_day_doses_administered);var o=n.reduce((function(e,t){return t+e}),0);return e.new_vaccines_rolling_average=Math.round(o/7),e})),e(r)}))}))},S=a("mPjd"),D=o.a.createElement;t.default=function(){var e=Object(i.useState)([]),t=e[0],a=e[1],o=Object(i.useState)(!0),d=o[0],_=o[1];Object(i.useEffect)((function(){b().then(a).then((function(){return _(!1)}))}),[]);var f=[{title:"Summary",href:"#"}].concat(Object(r.a)(S.c.map((function(e){var t=e.title;return{title:t,href:"#".concat(t)}}))));return D(s.a,{menuItems:f},D("div",{className:"ph16"},D(c.a,{variant:"h4"},"Covid-19 Vaccinations in Ontario"),d?D("p",{className:"tc"},D("strong",null,"Hold tight.. just fetching the latest data"),D("div",null,D(l.a,null))):D(i.Fragment,null,D(v,{data:t}),D(y,{dataSource:t}),S.c.map((function(e,a){return D(u.a,Object(n.a)({key:a,dataSource:t,syncId:"vaccineCharts"},e))})))))}}},[["7Xy9",0,2,1,3,4,5,6]]]);