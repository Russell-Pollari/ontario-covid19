_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[12],{"7Xy9":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vaccinations",function(){return a("t8Fg")}])},t8Fg:function(e,t,a){"use strict";a.r(t);var n=a("HALo"),r=a("z7pX"),i=a("vJKn"),o=a.n(i),s=a("rg98"),c=a("q1tI"),u=a.n(c),l=a("iae6"),_=a("ofer"),d=a("7oih"),f=a("Cmmz"),v=a("uM61"),p=u.a.createElement,h=function(e){var t=e.data,a=void 0===t?[]:t;if(!a.length)return null;var n=a[a.length-1],r=n.total_individuals_fully_vaccinated,i=n.previous_day_at_least_one,o=n.total_individuals_3doses;return p(v.a,{title:"Vaccinations at a glance"},p("ul",null,p("li",null,p("strong",null,Math.round((i+r)/14010998*100*100)/100,"%")," ","of the ",p("em",null,"eligible")," population of Ontario has had at least one shot."),p("li",null,p("strong",null,Math.round(r/14010998*100*100)/100,"%")," ","of the ",p("em",null,"eligible")," population of Ontario has had at least two shots."),p("li",null,p("strong",null,Math.round(o/14010998*100*100)/100,"%")," ","of the ",p("em",null,"eligible")," population of Ontario has had three shots.")),p("div",{className:"mt16 f12"},p("em",null,"Eligible population"),": Everyone 5 and older based on estimates from Statistics Canada on July 1st 2020."))},m=a("XkeK"),g=u.a.createElement,y=function(e){return e?Number(e).toLocaleString():null},b=function(e){return e?"".concat(e>=0?"+":"").concat(y(e)):null},w=[{label:"Date",key:"date_string"},{label:"Total doses administered",key:"total_doses_administered",formatValue:y},{label:"Daily vaccines",key:"previous_day_total_doses_administered",formatValue:b,highlight:"positive"},{label:"7 day average",key:"new_vaccines_rolling_average",formatValue:b,highlight:"positive"},{label:"Total people with 2 doses",key:"total_individuals_fully_vaccinated",formatValue:y,headerColSpan:"2"},{label:"",key:"previous_day_fully_vaccinated",formatValue:b,highlight:"positive"},{label:"Total people with 3 doses",key:"total_individuals_3doses",formatValue:y}],D=function(e){var t=e.dataSource,a=void 0===t?[]:t;return g(m.a,{title:"Status of Vaccinations in Ontario",data:a,columns:w})},O=a("StWE"),S=function(e){return"number"===typeof e?e:Number((e||"0").replace(/,/g,""))},j=function(){return new Promise((function(e){Object(O.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=100000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.report_date)-new Date(t.report_date)}));for(var n=[0,0,0,0,0,0,0],r=[],i=1;i<a.length;i++){var o=a[i],s=new Date(o.report_date).getTime(),c=a[i-1];r.push(c);var u=new Date(c.report_date);for(u.setDate(u.getDate()+1);u.getTime()<s;){var l=Object.assign({},c,{report_date:u.toISOString().replace(/\.\d+Z/,"")});r.push(l),u.setDate(u.getDate()+1)}}r.push(a[a.length-1]),r.map((function(e){var t=e.report_date,a=e.total_doses_administered,r=e.previous_day_total_doses_administered,i=e.total_individuals_fully_vaccinated;e.date_string=new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),e.total_doses_administered=S(a),e.previous_day_total_doses_administered=S(r),e.total_individuals_fully_vaccinated=S(i),e.previous_day_third_doses=r-S(e.previous_day_at_least_one)-S(e.previous_day_fully_vaccinated),n.shift(),n.push(e.previous_day_total_doses_administered);var o=n.reduce((function(e,t){return t+e}),0);return e.new_vaccines_rolling_average=Math.round(o/7),e})),e(r)}))}))},k=function(e){return"number"===typeof e?e:Number((e||"0").replace(/,/g,""))},P=function(){return new Promise((function(e){Object(O.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=775ca815-5028-4e9b-9dd4-6975ff1be021&limit=13&sort=_id desc",(function(t){var a=t.result,n=a.records.filter((function(e){return"Undisclosed_or_missing"!=e.Agegroup}));a.records.sort((function(e,t){return e._id-t._id})),a.records.map((function(e){var t=e.Agegroup,a=e.Percent_at_least_one_dose,n=e.Percent_fully_vaccinated;return e.Agegroup=function(e){switch(e){case"12-17yrs":return"12-17";case"18-29yrs":return"18-29";case"30-39yrs":return"30s";case"40-49yrs":return"40s";case"50-59yrs":return"50s";case"60-69yrs":return"60s";case"70-79yrs":return"70s";case"Adults_18plus":return"18+";case"Ontario_12plus":return"12+";case"Ontario_5plus":return"5+";case"05-11yrs":return"5-11yrs";default:return e}}(t),e.Percent_at_least_one_dose=100*k(a),e.Percent_fully_vaccinated=100*k(n),e.percent_partially_vaccinated=e.Percent_at_least_one_dose-e.Percent_fully_vaccinated,e.percent_not_vaccinated=100-e.Percent_at_least_one_dose,e})),e(n)}))}))},V=function(){return new Promise((function(e){Object(O.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=eed63cf2-83dd-4598-b337-b288c0a89a16&limit=1000000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.Date)-new Date(t.Date)}));var n=a.map((function(e){var t=e.Date,a=e.covid19_cases_unvac,n=e.covid19_cases_partial_vac,r=e.covid19_cases_full_vac,i=e.covid19_cases_vac_unknown;return e.date_string=new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),e.cases_unvac=k(a),e.cases_partial_vac=k(n),e.cases_full_vac=k(r),e.cases_vac_unknown=k(i),e}));e(n)}))}))},E=function(){return new Promise((function(e){Object(O.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=274b819c-5d69-4539-a4db-f2950794138c&limit=1000000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.date)-new Date(t.date)}));var n=a.map((function(e){var t=e.date,a=e.icu_unvac,n=e.icu_partial_vac,r=e.icu_full_vac,i=e.hospitalnonicu_partial_vac,o=e.hospitalnonicu_full_vac,s=e.hospitalnonicu_unvac;return{date_string:new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),icu_unvac:a,icu_full_vac:r,icu_partial_vac:n,hospital_partial_vac:k(n)+k(i),hospital_full_vac:k(r)+k(o),hospital_unvac:k(a)+k(s)}}));e(n)}))}))},N=a("mPjd"),x=a("/NAY"),A=u.a.createElement;t.default=function(){var e=Object(c.useState)([]),t=e[0],a=e[1],i=Object(c.useState)([]),u=i[0],v=i[1],p=Object(c.useState)([]),m=p[0],g=p[1],y=Object(c.useState)([]),b=y[0],w=y[1],O=Object(c.useState)(!0),S=O[0],k=O[1],T=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P().then(v);case 2:return e.next=4,j().then(a);case 4:return e.next=6,V().then(g);case 6:return e.next=8,E().then(w);case 8:k(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){T()}),[]);var X=[{title:"Summary",href:"#"}].concat(Object(r.a)(N.c.map((function(e){var t=e.title;return{title:t,href:"#".concat(t)}})))),L=function(e){switch(e){case x.a.vaccinatedByAge:return u;case x.a.totalDoses:case x.a.totalVaccinated:case x.a.dailyDoses:return t;case x.a.casesByVax:return m;case x.a.hospitalByVax:case x.a.icuByVax:return b;default:return[]}};return A(d.a,{menuItems:X},A("div",{className:"ph16"},A(_.a,{variant:"h4"},"Covid-19 Vaccinations in Ontario"),S?A("p",{className:"tc"},A("strong",null,"Hold tight.. just fetching the latest data"),A("div",null,A(l.a,null))):A(c.Fragment,null,A(h,{data:t}),A(D,{dataSource:t}),N.c.map((function(e,t){return A(f.a,Object(n.a)({key:t,dataSource:L(e.id)},e))})))))}}},[["7Xy9",0,2,1,3,4,5]]]);