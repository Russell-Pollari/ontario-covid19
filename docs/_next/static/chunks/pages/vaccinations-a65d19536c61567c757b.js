_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"7Xy9":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vaccinations",function(){return a("t8Fg")}])},t8Fg:function(e,t,a){"use strict";a.r(t);var n=a("HALo"),r=a("z7pX"),i=a("vJKn"),o=a.n(i),s=a("rg98"),c=a("q1tI"),l=a.n(c),u=a("iae6"),d=a("ofer"),_=a("7oih"),v=a("Cmmz"),f=a("uM61"),p=l.a.createElement,g=function(e){var t=e.data,a=void 0===t?[]:t;if(!a.length)return null;var n=a[a.length-1],r=n.total_individuals_fully_vaccinated,i=n.total_doses_administered-2*r,o=(2*(12932471-r)-i)/n.new_vaccines_rolling_average,s=(12932471-r-i)/n.new_vaccines_rolling_average;return p(f.a,{title:"Vaccinations at a glance"},p("ul",null,p("li",null,p("strong",null,Math.round((i+r)/12932471*100*100)/100,"%")," ","of the ",p("em",null,"eligible")," population of Ontario has had at least one shot.*"),p("li",null,p("strong",null,Math.round(r/12932471*100*100)/100,"%")," ","of the ",p("em",null,"eligible")," population of Ontario is fully vaccinated.*"),p("li",null,"At the current average pace of ",p("strong",null,n.new_vaccines_rolling_average.toLocaleString())," shots per day. We can deliver a single dose to every eligible person in ",p("strong",null,Math.round(s)," days.")," And reach full vaccination in ",p("strong",null,Math.round(o)," days.*"))),p("div",{className:"mt16 f12"},"*Eligible population: Everyone 12 and older based on estimates from Statistics Canada on July 1st 2020.",p("br",null),"*These numbers are all back-of-the-envolope estimates. Don't take them as fact."))},m=a("XkeK"),h=l.a.createElement,y=function(e){return e.toLocaleString()},b=function(e){return"".concat(e>=0?"+":"").concat(y(e))},w=[{label:"Date",key:"date_string"},{label:"Total doses administered",key:"total_doses_administered",formatValue:y},{label:"Daily vaccines",key:"previous_day_total_doses_administered",formatValue:b,highlight:"positive"},{label:"7 day average",key:"new_vaccines_rolling_average",formatValue:b,highlight:"positive"},{label:"Total people fully vaccinated",key:"total_individuals_fully_vaccinated",formatValue:y}],S=function(e){var t=e.dataSource,a=void 0===t?[]:t;return h(m.a,{title:"Status of Vaccinations in Ontario",data:a,columns:w})},O=a("StWE"),j=function(e){return"number"===typeof e?e:Number((e||"0").replace(/,/g,""))},k=function(){return new Promise((function(e){Object(O.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=100000",(function(t){var a=t.result.records;a.sort((function(e,t){return new Date(e.report_date)-new Date(t.report_date)}));for(var n=[0,0,0,0,0,0,0],r=[],i=1;i<a.length;i++){var o=a[i],s=new Date(o.report_date).getTime(),c=a[i-1];r.push(c);var l=new Date(c.report_date);for(l.setDate(l.getDate()+1);l.getTime()<s;){var u=Object.assign({},c,{report_date:l.toISOString().replace(/\.\d+Z/,"")});r.push(u),l.setDate(l.getDate()+1)}}r.push(a[a.length-1]);var d=0,_=0;r.map((function(e){var t=e.report_date,a=e.total_doses_administered,r=e.previous_day_total_doses_administered,i=e.total_doses_in_fully_vaccinated_individuals,o=e.total_individuals_fully_vaccinated;e.date_string=new Date(t).toLocaleString("en-us",{month:"short",day:"numeric"}),e.total_doses_administered=j(a),e.previous_day_total_doses_administered=j(r),e.total_individuals_fully_vaccinated=j(o);var s=j(i),c=j(2*(e.total_individuals_fully_vaccinated-s/2)),l=j(c-_);_=c;var u=Math.floor((s-c)/2),v=u-d;d=u;var f=e.previous_day_total_doses_administered-(v+l);e.previous_day_one_shot_doses_administered=l,e.previous_day_second_doses_administered=v,e.previous_day_first_doses_administered=f,n.shift(),n.push(e.previous_day_total_doses_administered);var p=n.reduce((function(e,t){return t+e}),0);return e.new_vaccines_rolling_average=Math.round(p/7),e})),e(r)}))}))},D=function(e){return"number"===typeof e?e:Number((e||"0").replace(/,/g,""))},E=function(){return new Promise((function(e){Object(O.a)("https://data.ontario.ca/api/3/action/datastore_search?resource_id=775ca815-5028-4e9b-9dd4-6975ff1be021&limit=10&sort=_id desc",(function(t){var a=t.result.records.filter((function(e){return"Undisclosed_or_missing"!=e.Agegroup}));a.sort((function(e,t){return e._id-t._id})),a.map((function(e){var t=e.Agegroup,a=e.Percent_at_least_one_dose,n=e.Percent_fully_vaccinated;return e.Agegroup=function(e){switch(e){case"12-17yrs":return"12-17";case"18-29yrs":return"18-29";case"30-39yrs":return"30s";case"40-49yrs":return"40s";case"50-59yrs":return"50s";case"60-69yrs":return"60s";case"70-79yrs":return"70s";case"Adults_18plus":return"18+";default:return e}}(t),e.Percent_at_least_one_dose=100*D(a),e.Percent_fully_vaccinated=100*D(n),e.percent_partially_vaccinated=e.Percent_at_least_one_dose-e.Percent_fully_vaccinated,e.percent_not_vaccinated=100-e.Percent_at_least_one_dose,e})),e(a)}))}))},P=a("mPjd"),A=l.a.createElement;t.default=function(){var e=Object(c.useState)([]),t=e[0],a=e[1],i=Object(c.useState)([]),l=i[0],f=i[1],p=Object(c.useState)(!0),m=p[0],h=p[1],y=function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E().then(f),e.next=3,k().then(a);case 3:h(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){y()}),[]);var b=[{title:"Summary",href:"#"}].concat(Object(r.a)(P.e.map((function(e){var t=e.title;return{title:t,href:"#".concat(t)}}))));return A(_.a,{menuItems:b},A("div",{className:"ph16"},A(d.a,{variant:"h4"},"Covid-19 Vaccinations in Ontario"),m?A("p",{className:"tc"},A("strong",null,"Hold tight.. just fetching the latest data"),A("div",null,A(u.a,null))):A(c.Fragment,null,A(g,{data:t}),A(S,{dataSource:t}),P.e.map((function(e,a){return"Agegroup"==e.dataKeyX?A(v.a,Object(n.a)({key:a,dataSource:l,syncId:"vaccineAgeCharts",xAxisScale:"band",valueSuffix:"%"},e)):A(v.a,Object(n.a)({key:a,dataSource:t,syncId:"vaccineCharts"},e))})))))}}},[["7Xy9",0,2,1,3,4,5,6]]]);