_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[13],{"+MOk":function(a,e,t){"use strict";t.r(e);var n=t("HALo"),i=t("vJKn"),l=t.n(i),r=t("rg98"),s=t("q1tI"),d=t.n(s),c=t("iae6"),o=t("ofer"),u=t("cpVT");var f=t("8rE2");function y(a,e){return function(a){if(Array.isArray(a))return a}(a)||function(a,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(a)){var t=[],n=!0,i=!1,l=void 0;try{for(var r,s=a[Symbol.iterator]();!(n=(r=s.next()).done)&&(t.push(r.value),!e||t.length!==e);n=!0);}catch(d){i=!0,l=d}finally{try{n||null==s.return||s.return()}finally{if(i)throw l}}return t}}(a,e)||Object(f.a)(a,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var v=t("StWE"),m="https://data.ontario.ca/api/3/action/datastore_search?resource_id=455fd63b-603d-4608-8216-7d8647f43350&fields=Outcome1,Accurate_Episode_Date,Age_Group&limit=1000000",_=["<20","20s","30s","40s","50s","60s","70s","80s","90+"],b=function(){var a={};return _.forEach((function(e){a[e]={ageGroup:e,total:0,deceased:0,resolved:0,active:0}})),a},g=function(a){var e=b(),t={};return a.forEach((function(a){var n=a.Age_Group;if("UNKNOWN"!==n){var i=a.Accurate_Episode_Date.substring(0,7);t[i]||(t[i]=b());var l=e[n],r=t[i][n];l.total+=1,r.total+=1,"Fatal"===a.Outcome1?(l.deceased+=1,r.deceased+=1):"Resolved"===a.Outcome1?(l.resolved+=1,r.resolved+=1):(l.active+=1,r.active+=1)}})),{totalByAge:_.map((function(a){return e[a]})),monthyByAge:Object.entries(t).sort((function(a,e){var t=y(a,1)[0],n=y(e,1)[0];return new Date(t)-new Date(n)})).map((function(a){var e=y(a,2),t=e[0],n=e[1],i={month:t};return Object.values(n).forEach((function(a){var e=a.ageGroup,t=a.total,n=a.deceased,l=a.resolved,r=a.active;i["".concat(e,"-total")]=t,i["".concat(e,"-deceased")]=n,i["".concat(e,"-resolved")]=l,i["".concat(e,"-active")]=r})),i}))}},p="undefined"!==typeof Storage,h="CACHED_getCaseDataResult",K=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.a;return new Promise((function(e){if(p){var t=new Date,n=localStorage.getItem(h);if(n){var i=JSON.parse(n);if(t.getTime()<=i.expiry&&i.ageData&&i.v3)return console.log("Using cached result data localStorage. Clear storage key ".concat(h," to reset.")),void e(i.ageData)}a(m,(function(a){var n,i=g(a.result.records),l=new Date(t);l.setHours(t.getHours()+8),localStorage.setItem(h,JSON.stringify((n={},Object(u.a)(n,"v3",!0),Object(u.a)(n,"expiry",l.getTime()),Object(u.a)(n,"ageData",i),n))),e(i)}))}else a(m,(function(a){var t=g(a.result.records);e(t)}))}))},k=t("Cmmz"),w=t("Anlk"),I=t("mPjd"),O=d.a.createElement;e.default=function(){var a=Object(s.useState)([]),e=a[0],t=a[1],i=Object(s.useState)(!0),d=i[0],u=i[1],f=function(){var a=Object(r.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K().then((function(a){t(a.totalByAge)}));case 2:u(!1);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(s.useEffect)((function(){f()}),[]),O(w.a,{title:"Case statistics"},O(o.a,{variant:"h6"},"Some statistics on Covid-19 cases in Ontario"),d?O("div",{className:"tc"},O(c.a,null),O("p",null,"Hang tight. Just fetching and compiling the data")):O(s.Fragment,null,O(k.a,Object(n.a)({dataSource:e,xAxisScale:"band"},I.a))))}},"/NAY":function(a,e,t){"use strict";e.a={casesByVax:1,hospitalByVax:2,icuByVax:3,totalDoses:4,totalVaccinated:5,vaccinatedByAge:6,dailyDoses:7}},"9Rzn":function(a,e,t){"use strict";var n=t("TqRt");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(t("q1tI")),l=(0,n(t("8/g6")).default)(i.default.createElement("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined");e.default=l},Anlk:function(a,e,t){"use strict";var n=t("q1tI"),i=t.n(n),l=t("YFqc"),r=t.n(l),s=t("bXiM"),d=t("5CWz"),c=t("PsDL"),o=t("lO0E"),u=t("ofer"),f=t("9Rzn"),y=t.n(f),v=t("Ji2X"),m=t("R/WZ"),_=t("BomS"),b=i.a.createElement,g=Object(m.a)((function(a){return{toolbar:a.mixins.toolbar,main:{padding:16},appBar:{flexGrow:1},title:{flexGrow:1}}}));e.a=function(a){var e=a.title,t=a.children,n=g();return b("div",null,b(d.a,null),b(s.a,{position:"fixed",className:n.appBar},b(o.a,null,b(c.a,{color:"inherit",edge:"start"},b(r.a,{href:"/"},b(y.a,null))),b(u.a,{variant:"h6",noWrap:!0,className:n.title},e),b(_.a,null))),b("main",{className:n.main},b("div",{className:n.toolbar}),b(v.a,null,t)))}},cpVT:function(a,e,t){"use strict";function n(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}t.d(e,"a",(function(){return n}))},mPjd:function(a,e,t){"use strict";t.d(e,"b",(function(){return P})),t.d(e,"d",(function(){return D})),t.d(e,"a",(function(){return E})),t.d(e,"c",(function(){return x}));var n={title:"New cases",dataKeyX:"date_string",bars:[{dataKey:"new_cases",name:"New cases",fill:"#f9d45c"}],lines:[{dataKey:"new_cases_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},i={title:"Active cases",dataKeyX:"date_string",bars:[{dataKey:"active_cases",fill:"#f9d45c",name:"Active cases",stackId:"a"}]},l={title:"Total cases",dataKeyX:"date_string",areas:[{dataKey:"Total Cases",fill:"#f9d45c",stroke:"#f9d45c",name:"Total cases",stackId:"a"}]},r={title:"New deaths",dataKeyX:"date_string",bars:[{dataKey:"new_deaths",name:"New deaths",fill:"#ef8c8c"}],lines:[{dataKey:"new_deaths_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},s={title:"Total deaths",dataKeyX:"date_string",areas:[{dataKey:"Deaths",name:"Total deaths",fill:"#ef8c8c"}]},d={title:"Patients hospitalized",dataKeyX:"date_string",bars:[{dataKey:"Number of patients hospitalized with COVID-19",name:"Patients hospitalized",fill:"#ef8c8c"}]},c={title:"Patients in ICU",dataKeyX:"date_string",bars:[{dataKey:"Number of patients in ICU on a ventilator due to COVID-19",fill:"#509ee3",name:"ICU (with ventilator)",stackId:"a"},{dataKey:"icu_no_ventilator",fill:"#7172ad",name:"ICU (no ventilator)",stackId:"a"}]},o={title:"New tests",dataKeyX:"date_string",bars:[{dataKey:"Total tests completed in the last day",name:"New tests",fill:"#509ee3"}],lines:[{dataKey:"Under Investigation",name:"Pending tests",dot:!1,strokeWidth:2,stroke:"teal"},{dataKey:"tests_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},u={title:"Percent positive",dataKeyX:"date_string",bars:[{dataKey:"percent_positive",name:"Percent positive",fill:"#509ee3"}],lines:[{dataKey:"tests_positive_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},f=t("/NAY"),y={id:f.a.totalDoses,dataKeyX:"date_string",title:"Total vaccines administered",syncId:"vaccineCharts",areas:[{dataKey:"total_doses_administered",name:"Total doses administered",fill:"#509ee3"}]},v={id:f.a.dailyDoses,dataKeyX:"date_string",title:"Daily vaccines administered",syncId:"vaccineCharts",bars:[{dataKey:"previous_day_at_least_one",name:"Daily first doses administered",fill:"#509ee3"},{dataKey:"previous_day_fully_vaccinated",name:"Daily second doses administered",fill:"#82ca9d"},{dataKey:"previous_day_third_doses",name:"Daily third doses administered",fill:"#82aa9d"}],lines:[{dataKey:"new_vaccines_rolling_average",name:"7 day rolling average",stroke:"black",strokeWidth:2,dot:!1}]},m={id:f.a.totalVaccinated,dataKeyX:"date_string",title:"Total people fully vaccinated",syncId:"vaccineCharts",areas:[{dataKey:"total_individuals_fully_vaccinated",name:"Total people fully vaccinated",fill:"#509ee3"}]},_={id:f.a.vaccinatedByAge,dataKeyX:"Agegroup",title:"Vaccination rate by age group",xAxisScale:"band",leftValueSuffix:"%",yAxisTicks:[0,25,50,80,90,100],bars:[{dataKey:"Percent_fully_vaccinated",name:"Fully vaccinated",fill:"#82ca9d"},{dataKey:"percent_partially_vaccinated",name:"Partially vaccinated",fill:"#509ee3"},{dataKey:"percent_not_vaccinated",name:"Not vaccinated",fill:"#c9c9c9"}]},b=t("q1tI"),g=t.n(b),p=g.a.createElement,h=p(b.Fragment,null,"* This data is population adjusted.",p("br",null),"* Population denominators are calculated based on daily dose history.",p("br",null),"* ",p("b",null,"Fully vaccinated")," = 14 days after 2nd dose",p("br",null),"* ",p("b",null,"Partially vaccinated")," = 14 days after 1st dose and <14 days after 2nd dose."),K={id:f.a.casesByVax,title:"Cases by vaccination status",dataKeyX:"date_string",footnote:h,areas:[{dataKey:"cases_unvac",name:"Unvaccinated",stroke:"#eb4034",fill:"#eb4034",stackId:1},{dataKey:"cases_partial_vac",name:"Partially vaccinated",stroke:"#f5b042",fill:"#f5b042",stackId:1},{dataKey:"cases_full_vac",name:"Fully vaccinated",stroke:"#82ca9d",fill:"#82ca9d",stackId:1},{dataKey:"cases_vac_unknown",name:"Unknown status",stackId:1}]},k=g.a.createElement,w=k(b.Fragment,null,"* This data is population adjusted.",k("br",null),"* Population denominators are calculated based on daily dose history.",k("br",null),"* ",k("b",null,"Fully vaccinated")," = 14 days after 2nd dose",k("br",null),"* ",k("b",null,"Partially vaccinated")," = 14 days after 1st dose and <14 days after 2nd dose."),I={id:f.a.hospitalByVax,footnote:w,title:"Hospitalization by vaccination status",dataKeyX:"date_string",areas:[{dataKey:"hospital_unvac",name:"Unvaccinated",stroke:"#eb4034",fill:"#eb4034",stackId:1},{dataKey:"hospital_partial_vac",name:"Partially vaccinated",stroke:"#f5b042",fill:"#f5b042",stackId:1},{dataKey:"hospital_full_vac",name:"Fully vaccinated",stroke:"#82ca9d",fill:"#82ca9d",stackId:1}]},O=g.a.createElement,N=O(b.Fragment,null,"* This data is population adjusted.",O("br",null),"* Population denominators are calculated based on daily dose history.",O("br",null),"* ",O("b",null,"Fully vaccinated")," = 14 days after 2nd dose",O("br",null),"* ",O("b",null,"Partially vaccinated")," = 14 days after 1st dose and <14 days after 2nd dose."),A={id:f.a.icuByVax,footnote:N,title:"ICU by vaccination status",dataKeyX:"date_string",areas:[{dataKey:"icu_unvac",name:"Unvaccinated",stroke:"#eb4034",fill:"#eb4034",stackId:1},{dataKey:"icu_partial_vac",name:"Partially vaccinated",stroke:"#f5b042",fill:"#f5b042",stackId:1},{dataKey:"icu_full_vac",name:"Fully vaccinated",stroke:"#82ca9d",fill:"#82ca9d",stackId:1}]},P=[i,l,n,s,r,o,u,d,c],D=[K,I,A,_,v,y,m],E={title:"Cases by age group",dataKeyX:"ageGroup",bars:[{dataKey:"deceased",fill:"#ef8c8c",name:"Deceased",stackId:"a"},{dataKey:"active",fill:"#f9d45c",name:"Active",stackId:"a"},{dataKey:"resolved",fill:"green",name:"Resolved",stackId:"a"}]},x={title:"Effective reproduction number",dataKeyX:"date_string",xLabel:"Week of",lines:[{dataKey:"Re",name:"Re",errorBarKey:"error_bars",dot:!1,stroke:"black"},{dataKey:function(){return 1},name:"Re = 1",dot:!1}]}},zorG:function(a,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stats",function(){return t("+MOk")}])}},[["zorG",0,2,1,3,4]]]);